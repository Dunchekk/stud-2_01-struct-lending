(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))d(e);new MutationObserver(e=>{for(const p of e)if(p.type==="childList")for(const E of p.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&d(E)}).observe(document,{childList:!0,subtree:!0});function b(e){const p={};return e.integrity&&(p.integrity=e.integrity),e.referrerPolicy&&(p.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?p.credentials="include":e.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function d(e){if(e.ep)return;e.ep=!0;const p=b(e);fetch(e.href,p)}})();window.onload=function(){console.log(PIXI);const r=document.getElementById("pixi-container-waves-blur"),i=document.getElementById("main-field-wrapper"),b=document.getElementById("main-field");let d=null;const e=new PIXI.Application({resizeTo:r,backgroundAlpha:0,antialias:!0});r.appendChild(e.view),e.ticker.maxFPS=45;const p=new PIXI.Container;e.stage.addChild(p);const E="media/background/wod2_safari.mp4",f="media/background/wod2.webm",o=document.createElement("video");o.crossOrigin="anonymous",o.muted=!0,o.loop=!0,o.autoplay=!0,o.playsInline=!0,o.setAttribute("playsinline",""),o.preload="auto";const h=document.createElement("source");h.src=E,h.type="video/mp4";const c=document.createElement("source");c.src=f,c.type="video/webm",o.append(h,c);const l=()=>o.play().catch(()=>{});o.addEventListener("canplay",l,{once:!0}),window.addEventListener("pointerdown",l,{once:!0});const I=PIXI.Texture.from(o),M=new PIXI.Sprite(I),U=1.4;M.anchor.set(.5);function F(){const S=o&&o.videoWidth||M.texture.width||1920,O=o&&o.videoHeight||M.texture.height||1080,D=Math.max(e.screen.width/S,e.screen.height/O)*U;M.scale.set(D),M.x=e.screen.width/2,M.y=e.screen.height/2,d&&(d.scale.set(D),d.x=M.x,d.y=M.y)}const N=()=>F();o.readyState>=1?N():o.addEventListener("loadedmetadata",N,{once:!0}),p.addChildAt(M,0);const $=/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent),Y=window.devicePixelRatio>2||e.screen.width<800;if(!$&&!Y){d=new PIXI.Sprite(M.texture),d.anchor.set(.5);const D=new PIXI.BlurFilter;D.blur=6,d.filters=[D],p.addChild(d);const L=new PIXI.Graphics,W=Math.max(e.screen.width,e.screen.height)*2;L.beginFill(16777215),L.drawRect(-W/2,-W/2,W,W),L.endFill(),L.beginHole(),L.drawCircle(0,0,300),L.endHole(),L.filters=[new PIXI.BlurFilter(250)];const a=new PIXI.Rectangle(-W/2,-W/2,W,W),y=e.renderer.generateTexture(L,{scaleMode:PIXI.SCALE_MODES.LINEAR,resolution:1,region:a}),t=new PIXI.Sprite(y);t.anchor.set(.5),e.stage.addChild(t),d.mask=t,e.stage.eventMode="static",e.stage.hitArea=e.screen,e.stage.on("pointermove",g=>{const s=g.global;t.position.set(s.x,s.y)}),window.addEventListener("resize",()=>{const g=Math.max(e.screen.width,e.screen.height)*2;L.clear(),L.beginFill(16777215),L.drawRect(-g/2,-g/2,g,g),L.endFill(),L.beginHole(),L.drawCircle(0,0,300),L.endHole(),L.filters=[new PIXI.BlurFilter(250)];const s=new PIXI.Rectangle(-g/2,-g/2,g,g),C=e.renderer.generateTexture(L,{scaleMode:PIXI.SCALE_MODES.LINEAR,resolution:1,region:s});t.texture=C,F(),n()})}const H=-1,u=(S,O,D)=>S+(O-S)*D;function T(){const S=Math.max(0,b.scrollWidth-i.clientWidth),O=Math.max(0,b.scrollHeight-i.clientHeight),D=S?i.scrollLeft/S:0,L=O?i.scrollTop/O:0;return{rx:D,ry:L}}function w(){const S=Math.max(0,(M.width-e.screen.width)/2),O=Math.max(0,(M.height-e.screen.height)/2);return{travelX:S,travelY:O}}function n(){const{rx:S,ry:O}=T(),{travelX:D,travelY:L}=w(),W=H*u(-D,+D,S),a=H*u(-L,+L,O),y=e.screen.width/2+W,t=e.screen.height/2+a;M.x=y,M.y=t,d&&(d.x=y,d.y=t)}let m=!1;i.addEventListener("scroll",()=>{m||(m=!0,requestAnimationFrame(()=>{m=!1,n()}))},{passive:!0}),n();const j=PIXI.Texture.from("https://pixijs.com/assets/pixi-filters/displacement_map_repeat.jpg");j.baseTexture.wrapMode=PIXI.WRAP_MODES.REPEAT;const x=new PIXI.Sprite(j);x.width=e.screen.width*2,x.height=e.screen.height*2,x.x=-e.screen.width/2,x.y=-e.screen.height/2,p.addChild(x);const k=PIXI.Texture.from("media/media-nodes/noisy.png"),P=new PIXI.TilingSprite(k,e.screen.width,e.screen.height);P.alpha=.2,p.addChild(P);const X=new PIXI.DisplacementFilter(x);X.scale.x=20,X.scale.y=40;let K=0;e.ticker.add(S=>{(K++&1)!==1&&(x.x+=.6*S,x.y+=.4*S,x.x>0&&(x.x=-e.screen.width/2),x.y>0&&(x.y=-e.screen.height/2),P.tilePosition.x+=.09*S,P.tilePosition.y+=.05*S)}),window.addEventListener("resize",()=>{F(),P.tileScale.set(e.screen.width/P.texture.width,e.screen.height/P.texture.height),x.width=e.screen.width*2,x.height=e.screen.height*2,x.x=-e.screen.width/2,x.y=-e.screen.height/2,P.width=e.screen.width,P.height=e.screen.height,n()}),document.body.style.overflow="hidden"};async function ie(){const i=await(await fetch("data/data.json")).json(),b=window.innerWidth,d=window.innerHeight,e=9,p=/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent),E=p?1.8:1,f=p?.9:1,o=b*e*E,h=d*e*f,l=window.innerWidth*(5/100),I=document.getElementById("main-field");I.style.width=o+"px",I.style.height=h+"px";const M=i.length,U=10,F=80,N=Math.max(l,10),$=Math.max(l,10),Y=Math.max(1,o-2*N),H=Math.max(1,h-2*$),u=[];(function(){const t=Math.ceil(M*1),g=Y/H;let s=Math.max(1,Math.round(Math.sqrt(t/g))),C=Math.max(1,Math.ceil(t/s));for(;s*C<t;){const _=(C+1)*s-t,G=C*(s+1)-t;_<=G?C++:s++}const R=Y/C,v=H/s,q=.3,z=.6,B=[];for(let _=0;_<s;_++)for(let G=0;G<C;G++){const A=N+G*R,V=$+_*v,J=A+R*q,Q=V+v*q,ee=R*(1-2*q),te=v*(1-2*q),ne=J+ee*(.5+(Math.random()-.5)*2*z),se=Q+te*(.5+(Math.random()-.5)*2*z);B.push({x:Math.min(N+Y,Math.max(N,ne)),y:Math.min($+H,Math.max($,se))})}for(let _=B.length-1;_>0;_--){const G=Math.floor(Math.random()*(_+1));[B[_],B[G]]=[B[G],B[_]]}u.length=0;for(let _=0;_<M&&_<B.length;_++)u.push(B[_])})(),u.length<M&&console.warn(`Разместили ${u.length}/${M} при min=${U}vw, max=${F}vw. 
      Увеличьте SCALE_FACTOR или скорректируйте min/max.`);function T(a){for(let y=a.length-1;y>0;y--){const t=Math.floor(Math.random()*(y+1));[a[y],a[t]]=[a[t],a[y]]}}T(u);const w=u.map(a=>({nx:a.x/o,ny:a.y/h})),n=[];function m(a,y,t){const g=a.getBoundingClientRect(),s=g.width/2,C=g.height/2,R=Math.min(o-l-s,Math.max(l+s,0)),v=Math.max(l+s,Math.min(o-l-s,o)),q=Math.min(h-l-C,Math.max(l+C,0)),z=Math.max(l+C,Math.min(h-l-C,h)),B=Math.min(v,Math.max(R,y)),_=Math.min(z,Math.max(q,t));a.style.left=B+"px",a.style.top=_+"px"}function j(a,y){const t=document.createElement("div");t.classList.add("text-el"),t.classList.add("map-item"),t.style.position="absolute",t.style.left=u[y].x+"px",t.style.top=u[y].y+"px",t.style.transform="translate(-50%, -50%)",t.dataset.id=a.id,t.dataset.name=a.name,t.dataset.link="—",t.innerHTML=`
    <div class="meta-top">
      <span class="title">${a.name}</span>
    </div>
    <div class="text-content">
      ${a.paragraphs.map((A,V)=>`<p ${V===0?'class="active"':""}>${A}</p>`).join("")}
    </div>
    <div class="meta-bottom">
      <span class="counter">1/${a.paragraphs.length}</span>
      <span class="scroll-hint">scroll it</span>
    </div>
  `;let g=0;const s=t.querySelectorAll("p"),C=t.querySelector(".counter");let R=!1;const v=1e3;function q(A){if(R)return;A()&&(R=!0,setTimeout(()=>{R=!1},v))}t.addEventListener("wheel",A=>{A.preventDefault(),A.deltaY>0?q(_):q(G)},{passive:!1});let z=null;const B=50;t.addEventListener("touchstart",A=>{z=A.touches[0].clientY},{passive:!0}),t.addEventListener("touchmove",A=>{if(z==null)return;const V=A.touches[0].clientY-z;Math.abs(V)>B&&A.preventDefault()},{passive:!1}),t.addEventListener("touchend",A=>{if(z==null)return;const V=A.changedTouches[0].clientY-z;Math.abs(V)>B&&(V<0&&q(_),V>0&&q(G)),z=null});function _(){return g<s.length-1?(s[g].classList.remove("active"),s[g].classList.add("exit"),g++,s[g].classList.add("active"),C.textContent=`${g+1}/${s.length}`,setTimeout(()=>{s.forEach(A=>A.classList.remove("exit"))},600),!0):!1}function G(){return g>0?(s[g].classList.remove("active"),s.forEach(A=>A.classList.remove("exit")),g--,s[g].classList.add("active"),C.textContent=`${g+1}/${s.length}`,!0):!1}document.getElementById("main-field").appendChild(t),n[y]=t,m(t,u[y].x,u[y].y)}function x(a,y){const t=document.createElement("div");t.classList.add("pic-el"),t.classList.add("map-item"),t.dataset.id=a.id,t.dataset.name=a.name,t.dataset.link=(a.link||"—").trim(),t.style.position="absolute",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.position="absolute",t.style.left=u[y].x+"px",t.style.top=u[y].y+"px",t.style.transform="translate(-50%, -50%)",a.style&&typeof a.style=="object"&&(a.style.width||a.style.height)||(t.style.width="auto",t.style.height="auto"),a.style&&typeof a.style=="object"&&Object.assign(t.style,a.style);const g=typeof a.url=="string"&&/\.(mp4|webm|ogg)$/i.test(a.url);let s;if(g){const v=document.createElement("video");v.src=a.url,v.muted=!0,v.loop=!0,v.autoplay=!0,v.playsInline=!0,v.preload="metadata",v.style.width="100%",v.style.height="100%",v.style.objectFit="cover",v.style.transition="transform 0.6s ease",v.addEventListener("canplay",()=>{v.play().catch(()=>{})}),s=v}else{const v=document.createElement("img");v.src=a.url,v.alt=a.name||"",v.decoding="async",v.loading="lazy",v.style.width="100%",v.style.height="100%",v.style.objectFit="cover",v.style.transition="transform 0.6s ease",s=v}t.appendChild(s),document.getElementById("main-field").appendChild(t),n[y]=t;const R=()=>m(t,u[y].x,u[y].y);R(),s.tagName==="IMG"?s.complete?R():s.addEventListener("load",R,{once:!0}):s.tagName==="VIDEO"&&(s.readyState>=1?R():s.addEventListener("loadedmetadata",R,{once:!0})),t.addEventListener("mouseenter",()=>{s.style.transform="scale(1.05)"}),t.addEventListener("mouseleave",()=>{s.style.transform="scale(1)"}),document.getElementById("main-field").appendChild(t),n[y]=t}function k(a,y){I.style.width=a+"px",I.style.height=y+"px",n.forEach((t,g)=>{if(!t)return;const s=w[g].nx*a,C=w[g].ny*y;t.style.left=s+"px",t.style.top=C+"px",m(t,s,C)})}let P=!1;window.addEventListener("resize",()=>{P||(P=!0,requestAnimationFrame(()=>{P=!1;const a=window.innerWidth,y=window.innerHeight,t=a*e*(p?E:1),g=y*e*(p?f:1);k(t,g)}))}),i.forEach((a,y)=>{if(!u[y]){console.warn(`Пропуск элемента #${y} (${a.name||a.id}) — нет позиции`);return}a.type==="text-el"?j(a,y):x(a,y)});const X=document.getElementById("main-field-wrapper"),K=document.querySelectorAll(".map-item"),S=new Set,O=document.getElementById("found-span"),D=document.getElementById("node-name"),L=document.getElementById("node-id-span"),W=new IntersectionObserver(a=>{a.forEach(y=>{const t=y.target,g=t.dataset.id,s=document.getElementById("node-link");if(g&&y.intersectionRatio>=.5){D&&(D.textContent=t.dataset.name||""),L&&(L.textContent=g),S.has(g)||(S.add(g),O&&(O.textContent=String(S.size)));const C=t.dataset.link||"";s&&(C?(s.href=C,s.textContent=C,s.target="_blank",s.rel="noopener noreferrer",s.style.pointerEvents="auto",s.style.opacity="1"):(s.removeAttribute("href"),s.textContent="",s.removeAttribute("target"),s.removeAttribute("rel"),s.style.pointerEvents="none",s.style.opacity="0.6"))}})},{root:X,threshold:[.5]});K.forEach(a=>W.observe(a))}document.addEventListener("DOMContentLoaded",()=>{ie()});document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("main-field-wrapper"),i=document.getElementById("main-field");if(!r||!i)return;const b=new IntersectionObserver(c=>{for(const l of c)l.intersectionRatio>=.5?l.target.classList.add("in-view"):l.target.classList.remove("in-view")},{root:r,threshold:[0,.4,1]}),d=c=>{c.classList.contains("reveal")||c.classList.add("reveal"),b.observe(c)};document.querySelectorAll(".map-item").forEach(d),new MutationObserver(c=>{for(const l of c)l.addedNodes.forEach(I=>{I instanceof HTMLElement&&(I.matches(".map-item")&&d(I),I.querySelectorAll?.(".map-item").forEach(d))})}).observe(i,{childList:!0,subtree:!0});const p=document.getElementById("main-field-wrapper");if(!p||!i)return;const E=()=>{const c=Math.max(0,i.scrollWidth-p.clientWidth),l=Math.max(0,i.scrollHeight-p.clientHeight);return{left:c/2,top:l/2}},f=(c="auto")=>{const{left:l,top:I}=E();p.scrollTo({left:l,top:I,behavior:c}),p.dispatchEvent(new Event("scroll",{bubbles:!1}))};let o=!1;const h=()=>o?void 0:i.scrollWidth>p.clientWidth+100&&i.scrollHeight>p.clientHeight+100?(o=!0,f("auto"),!0):!1;requestAnimationFrame(()=>{if(h())return;const c=new ResizeObserver(()=>{h()&&c.disconnect()});c.observe(i),c.observe(p);const l=performance.now(),I=()=>{h()||performance.now()-l>2e3||requestAnimationFrame(I)};I()}),window.addEventListener("load",()=>{o||f("auto")})});document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("main-field-wrapper"),i=document.getElementById("main-field");if(!r||!i)return;let b=!1,d=!1,e=0,p=0,E=0,f=0,o=!1;window.addEventListener("keydown",c=>{c.code==="Space"&&(o=!0,r.classList.add("grab-enabled"),c.preventDefault())}),window.addEventListener("keyup",c=>{c.code==="Space"&&(o=!1,r.classList.remove("grab-enabled"))}),r.addEventListener("pointerdown",c=>{c.pointerType!=="mouse"||c.button!==0||!o&&c.target.closest(".text-el, .pic-el")||(b=!0,d=!1,e=c.clientX,p=c.clientY,E=r.scrollLeft,f=r.scrollTop,r.setPointerCapture?.(c.pointerId))}),r.addEventListener("pointermove",c=>{if(!b)return;const l=c.clientX-e,I=c.clientY-p;!d&&Math.abs(l)+Math.abs(I)>3&&(d=!0,r.classList.add("dragging")),d&&(r.scrollLeft=E-l,r.scrollTop=f-I,c.preventDefault())});const h=c=>{b&&(b=!1,d&&(r.classList.remove("dragging"),d=!1),r.releasePointerCapture?.(c.pointerId))};r.addEventListener("pointerup",h),r.addEventListener("pointercancel",h),r.addEventListener("pointerleave",h)});document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("quastions"),i=document.getElementById("blending-explenation"),b=document.querySelector("html"),d=document.getElementById("init-span");if(!r||!i)return;(window.devicePixelRatio>2||navigator.hardwareConcurrency<=4)&&document.documentElement.classList.add("low-perf"),i.style.opacity="0";const e=0;let p=!1;const E=()=>{i.classList.remove("blend-anim-in","blend-anim-out"),b.classList.remove("pixi-anim-in","pixi-anim-out")},f=()=>{p||(E(),b.style.filter="invert(0)",i.classList.remove("blend-hidden"),i.classList.add("blend-anim-in"),b.classList.add("pixi-anim-in"),i.addEventListener("animationend",function h(c){c.animationName==="blendFadeIn"&&(i.removeEventListener("animationend",h),i.classList.remove("blend-anim-in"),b.classList.remove("pixi-anim-in"),i.classList.add("blend-open"),b.style.filter="invert(1)",i.style.opacity="1",d&&(d.style.transition||(d.style.transition="opacity 300ms ease"),d.style.opacity="0"),p=!0)},{once:!0}))},o=(h=e)=>{if(!p)return;E();const c=()=>{i.classList.add("blend-anim-out"),b.classList.add("pixi-anim-out"),i.addEventListener("animationend",function l(I){I.animationName==="blendFadeOut"&&(i.removeEventListener("animationend",l),i.classList.remove("blend-anim-out"),b.classList.remove("pixi-anim-out"),i.classList.remove("blend-open"),i.classList.add("blend-hidden"),i.style.opacity="0",b.style.filter="",d&&(d.style.transition||(d.style.transition="opacity 300ms ease"),d.style.opacity="1"),p=!1)},{once:!0})};h>0?setTimeout(c,h):c()};r.addEventListener("click",h=>{h.preventDefault(),p?o():f()})});function Z(){const r=document.getElementById("inition-field");if(!r)return;const i={name:"инициализация",paragraphs:["«В&nbsp;целях соблюдения академических норм они [студенты] обязаны выделять результаты своей деятельности, при&nbsp;реализации которой был использован ИИ, указывая характер и&nbsp;объем работ, выполненных с&nbsp;его помощью. В&nbsp;противном случае это рассматривается как нарушение академических норм, что может повлечь за&nbsp;собой дисциплинарное взыскание» — пишется в&nbsp;справочнике учебного процесса НИУ ВШЭ.","Было ли выписано хотя бы одно дисциплинарное взыскание на&nbsp;основании отсутствия указания об&nbsp;использовании студентом языковой модели? Преподаватели, вероятно, знают, насколько много студенческих текстов на&nbsp;самом деле написано не&nbsp;студентами — если не&nbsp;знают, то&nbsp;чувствуют.","За&nbsp;последний год 85 % (а&nbsp;то и&nbsp;больше) всех студенческих текстов, которые я&nbsp;читала (включая тексты дизайн-проектов, визуальных исследований, эссе и&nbsp;в&nbsp;целом любых заданий, где можно было бы&nbsp;сдать нечто, напоминающее текст), были написаны нейросетями. Говорил ли об&nbsp;этом хоть кто-то при&nbsp;его сдаче? Нет. По&nbsp;крайней мере, не преподавателю, а&nbsp;мне — одногруппнику, у&nbsp;которого явно нет намерений никого «сдать».","Пока что НИУ ВШЭ даже на&nbsp;первый взгляд не&nbsp;справляется с&nbsp;выполнением своих предписаний в&nbsp;справочнике учебного процесса, ведь полагаться в&nbsp;вопросе «авторства» (термин существующей традиции академии, все еще используемой ею) можно разве что на&nbsp;честность студента, которой, увы (судя по&nbsp;тому, что творится вокруг), у&nbsp;него нет.","Учебный процесс столкнулся с&nbsp;чем-то совершенно новым, и&nbsp;составители «академических норм» и&nbsp;«справочника учебного процесса» пока что вообще не&nbsp;понимают, как действовать. Бакалавриат можно закончить, не&nbsp;написав ни&nbsp;строчки текста самостоятельно — многие мои одногруппники упорно пытаются&nbsp;выполнить такой челлендж и&nbsp;пока что идут очень успешно — это пугает и&nbsp;вдохновляет одновременно.","Это определённо требует обсуждения, постановки совершенно новых вопросов, пересмотра уже существующих, но&nbsp;более не&nbsp;работающих концепций, обновления старых понятий и&nbsp;логики, которая уже не&nbsp;актуальна. Времени на&nbsp;это обсуждение у&nbsp;нас нет: темпы ежегодного роста способностей ИИ огромные и&nbsp;останавливаться не&nbsp;планируют.","В&nbsp;этом обсуждении придётся дойти и&nbsp;до&nbsp;новых «академических норм», хотя это будет далеко не первым шагом. Этот лонгрид — частичка в&nbsp;потоке этого бесконечного обсуждения, попытка собрать и&nbsp;использовать те&nbsp;концепции, которые, кажется, всё ещё работают в&nbsp;законах нового мира. Попытка найти что-то уже знакомое, чтобы стоять на&nbsp;теоретической почве было не&nbsp;так&nbsp;шатко.","Концепции, которыми я пользуюсь здесь, в&nbsp;основном будут взяты из&nbsp;методологии постструктурализма — большинство из&nbsp;них не просто пережили появление языковых моделей, но&nbsp;были ими обновлены / доказаны / выделены. Возможно, меня может куда-то занести, ноя&nbsp;буду стараться следовать обозначенному плану.","А теперь задачка. Был ли&nbsp;этот текст написан человеком? Если да,&nbsp;то&nbsp;какая его часть? Как вы&nbsp;это поняли?"]};function b(E){const f=document.createElement("div");f.classList.add("text-el"),f.classList.add("init-item"),f.style.position="absolute",f.style.left="50vw",f.style.top="50vh",f.style.transform="translate(-50%, -50%)",f.innerHTML=`
    <div class="meta-top">
      <span class="title">${E.name}</span>
    </div>
    <div class="text-content">
      ${E.paragraphs.map((u,T)=>`<p ${T===0?'class="active"':""}>${u}</p>`).join("")}
    </div>
    <div class="meta-bottom">
      <span class="counter">1/${E.paragraphs.length}</span>
      <span class="scroll-hint">scroll it</span>
    </div>
  `;let o=0;const h=f.querySelectorAll("p"),c=f.querySelector(".counter");let l=!1;const I=1e3;function M(u){if(l)return;u()&&(l=!0,setTimeout(()=>{l=!1},I))}const U=()=>{r.classList.contains("closing")||(r.classList.add("closing"),r.addEventListener("transitionend",()=>{r.style.display="none"},{once:!0}))};f.addEventListener("wheel",u=>{u.preventDefault(),u.deltaY>0?M($):M(Y)},{passive:!1});let F=null;const N=50;f.addEventListener("touchstart",u=>{F=u.touches[0].clientY},{passive:!0}),f.addEventListener("touchmove",u=>{if(F==null)return;const T=u.touches[0].clientY-F;Math.abs(T)>N&&u.preventDefault()},{passive:!1}),f.addEventListener("touchend",u=>{if(F==null)return;const T=u.changedTouches[0].clientY-F;Math.abs(T)>N&&(T<0&&M($),T>0&&M(Y)),F=null});function $(){return o<h.length-1?(h[o].classList.remove("active"),h[o].classList.add("exit"),o++,h[o].classList.add("active"),c.textContent=`${o+1}/${h.length}`,setTimeout(()=>{h.forEach(u=>u.classList.remove("exit"))},600),!0):!1}function Y(){return o>0?(h[o].classList.remove("active"),h.forEach(u=>u.classList.remove("exit")),o--,h[o].classList.add("active"),c.textContent=`${o+1}/${h.length}`,!0):!1}const H=f.querySelector(".meta-top");if(H){const u=document.createElement("span");u.className="close-init",u.setAttribute("role","button"),u.setAttribute("aria-label","закрыть"),u.textContent="×",H.appendChild(u),u.addEventListener("click",T=>{T.preventDefault(),T.stopPropagation(),U()})}document.getElementById("inition-field").appendChild(f),f.style.setProperty("color","#000","important"),f.style.zIndex="2001"}b(i);const d=()=>{r.style.display!=="none"&&!r.classList.contains("closing")||(r.querySelector(".text-el")||b(i),r.style.display="block",r.classList.add("closing"),requestAnimationFrame(()=>{r.classList.remove("closing")}))},e=()=>{r.classList.contains("closing")||(r.classList.add("closing"),r.addEventListener("transitionend",()=>{r.style.display="none"},{once:!0}))};window.InitOverlay={show:d,hide:e};const p=document.getElementById("init-span");p&&p.addEventListener("click",E=>{E.preventDefault(),d()})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Z):Z();document.addEventListener("DOMContentLoaded",function(){const r=document.getElementById("pixi-wrapper");if(!r)return;const i=Array.isArray(window.PICS)&&window.PICS.length?window.PICS:["media/body-parts/ar.webp","media/body-parts/original_17c39b5ebfce6f63b622346d966b34af.png","media/body-parts/original_1c300758673bb2ee8924571c026759f9.png","media/body-parts/original_1ce340ea95ce6d0563f89516c962eec9.png","media/body-parts/original_28562d4eccd70a092c4cb30e55b127c3.png","media/body-parts/original_2b1485cbb03ce46dfbece20f7276832d.png","media/body-parts/original_312f8af9f2526694cafa3771878119e4.png","media/body-parts/original_51625c7960e1a7352fa89e0e3af7dd42.png","media/body-parts/original_5a99021cb90714869e7cc137ddd22399.png","media/body-parts/original_5eb9627659ec24f59495d63c19a40018.png","media/body-parts/original_6397cdfea5ad82371d31c34c47f7f46c.png","media/body-parts/original_6c9f5a2bd1ba0be3c780d158c19d483d.png","media/body-parts/original_871653cae6f9aa282f4cfde634ee84f2.png","media/body-parts/original_91b46e8287a9abf6c95782d3cb3152b2.png","media/body-parts/original_9f050f313cabc8e0f726c561f82a7640.png","media/body-parts/original_a4c9255738bb3b4397b0261171264e7c.png","media/body-parts/original_b8755ea1b592d62b999df170a82b4a19.png","media/body-parts/original_d217e6a9a2ad80c3fe16a6e5c1a7fd28.png","media/body-parts/original_dbc5c8a6eeae6710fb5a398abcd4adad.png","media/body-parts/original_de4a16120dd519bd604013775f828464.png","media/body-parts/original_e34b08a5d5957be5d2b32e976b2ca1ae.png","media/body-parts/original_e8ab5d1c14f7d75ce10ac5170fb868ab.png","media/body-parts/ssdv.png","media/body-parts/svczx.png"],b=1,d=[1800,3400],e=120,p=[60,110],E=[.1,.2],f=[16,32],o=new Set;let h=0,c=0;function l(w,n){return w+Math.random()*(n-w)}function I(w,n){return Math.floor(l(w,n))}function M(w){return w[I(0,w.length)]}function U(){return{w:window.innerWidth,h:window.innerHeight}}function F(w){const n=new Image;return n.src=w,n.className="floating-img",n.decoding="async",n.loading="eager",n.draggable=!1,n.style.position="absolute",n.style.pointerEvents="none",n.style.mixBlendMode="color-dodge",n.style.willChange="transform, opacity",n.style.opacity=String(l(E[0],E[1])),n.style.width=`${l(p[0],p[1]).toFixed(1)}vw`,n.style.height="auto",n}function N(){const{w,h:n}=U(),m=e,j=I(0,4);let x,k,P,X;switch(j){case 0:x=-m,k=l(-m,n+m),P=w+m,X=l(-m,n+m);break;case 1:x=w+m,k=l(-m,n+m),P=-m,X=l(-m,n+m);break;case 2:x=l(-m,w+m),k=-m,P=l(-m,w+m),X=n+m;break;default:x=l(-m,w+m),k=n+m,P=l(-m,w+m),X=-m;break}return P+=l(-m*.5,m*.5),X+=l(-m*.5,m*.5),{x0:x,y0:k,x1:P,y1:X}}function $(){if(o.size>=b)return;const w=M(i),n=F(w);r.appendChild(n);const{x0:m,y0:j,x1:x,y1:k}=N(),P=performance.now(),X=l(f[0],f[1])*1e3;let K=0,S=0;const O=()=>{const L=n.getBoundingClientRect();K=L.width*.5,S=L.height*.5};n.onload=O,n.complete&&O();const D={el:n,start:P,dur:X,x0:m,y0:j,x1:x,y1:k,dead:!1,get offsetX(){return K},get offsetY(){return S}};o.add(D)}function Y(w){o.size&&o.forEach(n=>{if(n.dead)return;const m=Math.min(1,(w-n.start)/n.dur),j=n.x0+(n.x1-n.x0)*m-(n.offsetX||0),x=n.y0+(n.y1-n.y0)*m-(n.offsetY||0);n.el.style.transform=`translate3d(${j}px, ${x}px, 0)`,n.el.style.opacity=String(.1+.3*Math.sin(Math.PI*Math.min(m,1))),m>=1&&(n.dead=!0,n.el.remove(),o.delete(n))}),h=requestAnimationFrame(Y)}function H(){clearTimeout(c);const w=I(d[0],d[1]);c=setTimeout(()=>{o.size<b&&$(),H()},w)}function u(){r.style.display="block",h||(h=requestAnimationFrame(Y)),H()}function T(){clearTimeout(c),cancelAnimationFrame(h),h=0,o.forEach(w=>w.el.remove()),o.clear()}i&&i.length&&u(),window.FloatingImages={start:u,stop:T},document.addEventListener("visibilitychange",()=>{document.hidden?T():u()})});document.addEventListener("DOMContentLoaded",()=>{const r=document.documentElement,i=document.getElementById("inition-field"),b=document.getElementById("init-span"),d=document.getElementById("quastions");r.style.transition||(r.style.transition="filter 500ms ease");const e=f=>{r.style.filter=`invert(${f})`},p=()=>i?window.getComputedStyle(i).display!=="none"&&!i.classList.contains("closing"):!1,E=()=>{const f=p();e(f?1:0),d&&(d.style.display=f?"none":"")};E(),i&&i.addEventListener("click",f=>{f.target.closest(".close-init")&&e(0)}),b&&b.addEventListener("click",()=>{e(1),d&&(d.style.display="none")}),i&&new MutationObserver(()=>{E()}).observe(i,{attributes:!0,attributeFilter:["class","style"]})});
